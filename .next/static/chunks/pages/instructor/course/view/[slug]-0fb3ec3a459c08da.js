(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{92520:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instructor/course/view/[slug]",function(){return n(97562)}])},341:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s=n(47568),r=n(70655),a=n(85893),i=n(67294),c=n(50196),o=n(11163),l=n(98165),u=n(41664),d=n.n(u),h=function(){var e=(0,i.useState)(""),t=e[0],n=e[1];return(0,i.useEffect)(function(){n(window.location.pathname)},[window.location.pathname]),(0,a.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,a.jsx)(d(),{href:"/instructor",children:(0,a.jsx)("a",{className:"nav-link ".concat("/instructor"===t&&"active"),children:"Dashboard"})}),(0,a.jsx)(d(),{href:"/instructor/course/create",children:(0,a.jsx)("a",{className:"nav-link mb-2 ".concat("/instructor/course/create"===t&&"active"),children:"Course Create"})}),(0,a.jsx)(d(),{href:"/instructor/revenue",children:(0,a.jsx)("a",{className:"nav-link ".concat("/instructor/revenue"===t&&"active"),children:"Revenue"})})]})},p=function(e){var t,n=e.children,u=(0,i.useState)(!1),d=u[0],p=u[1],f=(0,o.useRouter)();(0,i.useEffect)(function(){m()},[]);var m=(t=(0,s.Z)(function(){var e,t;return(0,r.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.Z.get("/api/current-instructor")];case 1:return e=n.sent().data,console.log("INSTRUCTOR ROUTE => ",e),e.ok&&p(!0),[3,3];case 2:return t=n.sent(),console.log(t),p(!1),f.push("/"),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)});return(0,a.jsx)(a.Fragment,{children:d?(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-2",children:(0,a.jsx)(h,{})}),(0,a.jsx)("div",{className:"col-md-10",children:n})]})}):(0,a.jsx)(l.Z,{spin:!0,className:"d-flex justify-content-center display-1 text-primary p-5"})})}},97562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var s=n(47568),r=n(26042),a=n(69396),i=n(70655),c=n(85893),o=n(67294),l=n(11163),u=n(341),d=n(50196),h=n(86871),p=n(87381),f=n(71577),m=n(20983),x=n(81739),v=n(80275),j=n(86548),g=n(48489),Z=n(97937),N=n(63606),y=n(88484),b=n(30724),_=n.n(b),w=n(97910),C=n(4340),k=function(e){var t=e.values,n=e.setValues,s=e.handleAddLesson,i=e.uploading,o=e.uploadButtonText,l=e.handleVideo,u=e.progress,d=e.handleVideoRemove;return(0,c.jsx)("div",{className:"container pt-3",children:(0,c.jsxs)("form",{onSubmit:s,children:[(0,c.jsx)("input",{type:"text",className:"form-control square",onChange:function(e){return n((0,a.Z)((0,r.Z)({},t),{title:e.target.value}))},value:t.title,placeholder:"Title",autoFocus:!0,required:!0}),(0,c.jsx)("textarea",{className:"form-control mt-3",cols:"7",rows:"7",onChange:function(e){return n((0,a.Z)((0,r.Z)({},t),{content:e.target.value}))},value:t.content,placeholder:"Content"}),(0,c.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,c.jsxs)("label",{className:"btn btn-dark btn-block text-left mt-3",children:[o,(0,c.jsx)("input",{onChange:l,type:"file",accept:"video/*",hidden:!0})]}),!i&&t.video.Location&&(0,c.jsx)(p.Z,{title:"Remove",children:(0,c.jsx)("span",{onClick:d,className:"pt-1 pl-3",children:(0,c.jsx)(C.Z,{className:"text-danger d-flex justify-content-center pt-4 pointer"})})})]}),u>0&&(0,c.jsx)(w.Z,{className:"d-flex justify-content-center pt-2",percent:u,steps:10}),(0,c.jsx)(f.Z,{onClick:s,className:"col mt-3",size:"large",type:"primary",loading:i,shape:"round",children:"Save"})]})})},S=n(22920),A=n(87215),E=function(){var e,t=(0,o.useState)({}),n=t[0],b=t[1],w=(0,o.useState)(!1),C=w[0],E=w[1],T=(0,o.useState)({title:"",content:"",video:{}}),L=T[0],R=T[1],V=(0,o.useState)(!1),U=V[0],O=V[1],z=(0,o.useState)("Upload Video"),P=z[0],q=z[1],D=(0,o.useState)(0),F=D[0],I=D[1],M=(0,o.useState)(0),B=M[0],X=M[1],Y=(0,l.useRouter)(),G=Y.query.slug;(0,o.useEffect)(function(){ee()},[G]),(0,o.useEffect)(function(){n&&et()},[n]);var H,J,K,Q,W,$,ee=(e=(0,s.Z)(function(){var e;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,d.Z.get("/api/course/".concat(G))];case 1:return b(e.sent().data),[2]}})}),function(){return e.apply(this,arguments)}),et=(H=(0,s.Z)(function(){var e;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,d.Z.post("/api/instructor/student-count",{courseId:n._id})];case 1:return X(e.sent().data.length),[2]}})}),function(){return H.apply(this,arguments)}),en=(J=(0,s.Z)(function(e){var t,s;return(0,i.__generator)(this,function(i){switch(i.label){case 0:e.preventDefault(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,d.Z.post("/api/course/lesson/".concat(G,"/").concat(n.instructor._id),L)];case 2:return t=i.sent().data,R((0,a.Z)((0,r.Z)({},L),{title:"",content:"",video:{}})),I(0),q("Upload video"),E(!1),b(t),(0,S.Am)("Lesson added"),[3,4];case 3:return s=i.sent(),console.log(s),(0,S.Am)("Lesson add failed"),[3,4];case 4:return[2]}})}),function(e){return J.apply(this,arguments)}),es=(K=(0,s.Z)(function(e){var t,s,c,o;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),q((t=e.target.files[0]).name),O(!0),(s=new FormData).append("video",t),[4,d.Z.post("/api/course/video-upload/".concat(n.instructor._id),s,{onUploadProgress:function(e){I(Math.round(100*e.loaded/e.total))}})];case 1:return c=i.sent().data,console.log(c),R((0,a.Z)((0,r.Z)({},L),{video:c})),O(!1),[3,3];case 2:return o=i.sent(),console.log(o),O(!1),(0,S.Am)("Video upload failed"),[3,3];case 3:return[2]}})}),function(e){return K.apply(this,arguments)}),er=(Q=(0,s.Z)(function(){var e,t;return(0,i.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),O(!0),[4,d.Z.post("/api/course/video-remove/".concat(n.instructor._id),L.video)];case 1:return e=s.sent().data,console.log(e),R((0,a.Z)((0,r.Z)({},L),{video:{}})),O(!1),q("Upload another video"),[3,3];case 2:return t=s.sent(),console.log(t),O(!1),(0,S.Am)("Video remove failed"),[3,3];case 3:return[2]}})}),function(){return Q.apply(this,arguments)}),ea=(W=(0,s.Z)(function(e,t){var n,s;return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(e.trys.push([0,2,,3]),!window.confirm("Once you publish your course, it will be live in the marketplace"))return[2];return[4,d.Z.put("/api/course/publish/".concat(t))];case 1:return b(e.sent().data),(0,S.Am)("Congrats! Your course is live"),[3,3];case 2:return e.sent(),(0,S.Am)("Course publish fail.Try again"),[3,3];case 3:return[2]}})}),function(e,t){return W.apply(this,arguments)}),ei=($=(0,s.Z)(function(e,t){var n,s;return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(e.trys.push([0,2,,3]),!window.confirm("Once you unpublish your course, it will not be live in the marketplace"))return[2];return[4,d.Z.put("/api/course/unpublish/".concat(t))];case 1:return b(e.sent().data),(0,S.Am)("Your course is unplished"),[3,3];case 2:return e.sent(),(0,S.Am)("Course publish fail.Try again"),[3,3];case 3:return[2]}})}),function(e,t){return $.apply(this,arguments)});return(0,c.jsx)(u.Z,{children:(0,c.jsx)("div",{className:"contianer-fluid pt-3",children:n&&(0,c.jsxs)("div",{className:"container-fluid pt-1",children:[(0,c.jsxs)("div",{className:"media pt-2",children:[(0,c.jsx)(h.C,{size:80,src:n.image?n.image.Location:"/course.png"}),(0,c.jsx)("div",{className:"media-body pl-2",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col",children:[(0,c.jsx)("h5",{className:"mt-2 text-primary",children:n.name}),(0,c.jsxs)("p",{style:{marginTop:"-10px"},children:[n.lessons&&n.lessons.length," Lessons"]}),(0,c.jsx)("p",{style:{marginTop:"-15px",fontSize:"10px"},children:n.category})]}),(0,c.jsxs)("div",{className:"d-flex pt-4",children:[(0,c.jsx)(p.Z,{title:"".concat(B," Enrolled"),children:(0,c.jsx)(v.Z,{className:"h5 pointer text-info mr-4"})}),(0,c.jsx)(p.Z,{title:"Edit",children:(0,c.jsx)(j.Z,{onClick:function(){return Y.push("/instructor/course/edit/".concat(G))},className:"h5 pointer text-warning mr-4"})}),n.lessons&&n.lessons.length<5?(0,c.jsx)(p.Z,{title:"Min 5 lessons required to publish",children:(0,c.jsx)(g.Z,{className:"h5 pointer text-danger"})}):n.published?(0,c.jsx)(p.Z,{title:"Unpublish",children:(0,c.jsx)(Z.Z,{onClick:function(e){return ei(e,n._id)},className:"h5 pointer text-danger"})}):(0,c.jsx)(p.Z,{title:"Publish",children:(0,c.jsx)(N.Z,{onClick:function(e){return ea(e,n._id)},className:"h5 pointer text-success"})})]})]})})]}),(0,c.jsx)("hr",{}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col",children:(0,c.jsx)(_(),{source:n.description})})}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)(f.Z,{onClick:function(){return E(!0)},className:"col-md-6 offset-md-3 text-center",type:"primary",shape:"round",icon:(0,c.jsx)(y.Z,{}),size:"large",children:"Add Lesson"})}),(0,c.jsx)("br",{}),(0,c.jsx)(m.Z,{title:"+ Add Lesson",centered:!0,visible:C,onCancel:function(){return E(!1)},footer:null,children:(0,c.jsx)(k,{values:L,setValues:R,handleAddLesson:en,uploading:U,uploadButtonText:P,handleVideo:es,progress:F,handleVideoRemove:er})}),(0,c.jsx)("div",{className:"row pb-5",children:(0,c.jsxs)("div",{className:"col lesson-list",children:[(0,c.jsxs)("h4",{children:[n&&n.lessons&&n.lessons.length," Lessons"]}),(0,c.jsx)(x.ZP,{itemLayout:"horizontal",dataSource:n&&n.lessons,renderItem:function(e,t){return(0,c.jsx)(A.default,{children:(0,c.jsx)(A.default.Meta,{avatar:(0,c.jsx)(h.C,{children:t+1}),title:e.title})})}})]})})]})})})}}},function(e){e.O(0,[577,805,678,536,910,898,774,888,179],function(){return e(e.s=92520)}),_N_E=e.O()}]);