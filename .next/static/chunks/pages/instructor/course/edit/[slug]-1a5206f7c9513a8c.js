(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{59869:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instructor/course/edit/[slug]",function(){return t(57606)}])},13200:function(e,n,t){"use strict";var r=t(26042),a=t(69396),s=t(85893),o=t(44617),i=t(63922),c=t(86871),l=t(71577),u=o.Z.Option,d=function(e){for(var n=e.handleSubmit,t=e.handleImage,d=e.handleChange,f=e.values,h=e.setValues,p=e.preview,m=e.uploadButtonText,g=e.handleImageRemove,v=e.editPage,x=[],Z=9.99;Z<=100.99;Z++)x.push((0,s.jsxs)(u,{children:["$",Z.toFixed(2)]},Z.toFixed(2)));return(0,s.jsx)(s.Fragment,{children:f&&(0,s.jsxs)("form",{onSubmit:n,children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{type:"text",name:"name",className:"form-control",placeholder:"Name",value:f.name,onChange:d})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("textarea",{name:"description",cols:"7",rows:"7",value:f.description,className:"form-control",onChange:d})}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)(o.Z,{style:{width:"100%"},size:"large",value:f.paid,onChange:function(e){return h((0,a.Z)((0,r.Z)({},f),{paid:e,price:0}))},children:[(0,s.jsx)(u,{value:!0,children:"Paid"}),(0,s.jsx)(u,{value:!1,children:"Free"})]})})}),f.paid&&(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)(o.Z,{defaultValue:"$9.99",style:{widht:"100%"},onChange:function(e){return h((0,a.Z)((0,r.Z)({},f),{price:e}))},tokenSeparators:[,],size:"large",children:x})})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{type:"text",name:"category",className:"form-control",placeholder:"Category",value:f.category,onChange:d})}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("label",{className:"btn btn-outline-secondary btn-block text-left",children:[m,(0,s.jsx)("input",{type:"file",name:"image",onChange:t,accept:"image/*",hidden:!0})]})})}),p&&(0,s.jsx)(i.Z,{count:"X",onClick:void 0===g?function(e){return e}:g,className:"pointer",children:(0,s.jsx)(c.C,{width:200,src:p})}),void 0!==v&&v&&f.image&&(0,s.jsx)(c.C,{width:200,src:f.image.Location})]}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(l.Z,{onClick:n,disabled:f.loading||f.uploading,className:"btn btn-primary",loading:f.loading,type:"primary",size:"large",shape:"round",children:f.loading?"Saving...":"Save & Continue"})})})]})})};n.Z=d},341:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(47568),a=t(70655),s=t(85893),o=t(67294),i=t(50196),c=t(11163),l=t(98165),u=t(41664),d=t.n(u),f=function(){var e=(0,o.useState)(""),n=e[0],t=e[1];return(0,o.useEffect)(function(){t(window.location.pathname)},[window.location.pathname]),(0,s.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,s.jsx)(d(),{href:"/instructor",children:(0,s.jsx)("a",{className:"nav-link ".concat("/instructor"===n&&"active"),children:"Dashboard"})}),(0,s.jsx)(d(),{href:"/instructor/course/create",children:(0,s.jsx)("a",{className:"nav-link mb-2 ".concat("/instructor/course/create"===n&&"active"),children:"Course Create"})}),(0,s.jsx)(d(),{href:"/instructor/revenue",children:(0,s.jsx)("a",{className:"nav-link ".concat("/instructor/revenue"===n&&"active"),children:"Revenue"})})]})},h=function(e){var n,t=e.children,u=(0,o.useState)(!1),d=u[0],h=u[1],p=(0,c.useRouter)();(0,o.useEffect)(function(){m()},[]);var m=(n=(0,r.Z)(function(){var e,n;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i.Z.get("/api/current-instructor")];case 1:return e=t.sent().data,console.log("INSTRUCTOR ROUTE => ",e),e.ok&&h(!0),[3,3];case 2:return n=t.sent(),console.log(n),h(!1),p.push("/"),[3,3];case 3:return[2]}})}),function(){return n.apply(this,arguments)});return(0,s.jsx)(s.Fragment,{children:d?(0,s.jsx)("div",{className:"container-fluid",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-2",children:(0,s.jsx)(f,{})}),(0,s.jsx)("div",{className:"col-md-10",children:t})]})}):(0,s.jsx)(l.Z,{spin:!0,className:"d-flex justify-content-center display-1 text-primary p-5"})})}},57606:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var r=t(47568),a=t(14924),s=t(26042),o=t(69396),i=t(10797),c=t(70655),l=t(85893),u=t(67294),d=t(50196),f=t(341),h=t(13200),p=t(76770),m=t.n(p),g=t(22920),v=t(11163),x=t(81739),Z=t(86871),j=t(20983),y=t(1413),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},N=t(42135),w=function(e,n){return u.createElement(N.Z,(0,y.Z)((0,y.Z)({},e),{},{ref:n,icon:b}))};w.displayName="DeleteOutlined";var C=u.forwardRef(w),_=t(97910),S=t(87462),k=t(4942),E=t(50888),I=t(94184),O=t.n(I),T=t(97685),D=t(91),A=t(21770),L=t(15105),R=u.forwardRef(function(e,n){var t,r=e.prefixCls,a=void 0===r?"rc-switch":r,s=e.className,o=e.checked,i=e.defaultChecked,c=e.disabled,l=e.loadingIcon,d=e.checkedChildren,f=e.unCheckedChildren,h=e.onClick,p=e.onChange,m=e.onKeyDown,g=(0,D.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),v=(0,A.Z)(!1,{value:o,defaultValue:i}),x=(0,T.Z)(v,2),Z=x[0],j=x[1];function y(e,n){var t=Z;return c||(j(t=e),null==p||p(t,n)),t}var b=O()(a,s,(t={},(0,k.Z)(t,"".concat(a,"-checked"),Z),(0,k.Z)(t,"".concat(a,"-disabled"),c),t));return u.createElement("button",Object.assign({},g,{type:"button",role:"switch","aria-checked":Z,disabled:c,className:b,ref:n,onKeyDown:function(e){e.which===L.Z.LEFT?y(!1,e):e.which===L.Z.RIGHT&&y(!0,e),null==m||m(e)},onClick:function(e){var n=y(!Z,e);null==h||h(n,e)}}),l,u.createElement("span",{className:"".concat(a,"-inner")},Z?d:f))});R.displayName="Switch";var P=t(53124),U=t(98866),z=t(97647),V=t(68349),F=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>n.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>n.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t},M=u.forwardRef(function(e,n){var t,r=e.prefixCls,a=e.size,s=e.disabled,o=e.loading,i=e.className,c=F(e,["prefixCls","size","disabled","loading","className"]),l=u.useContext(P.E_),d=l.getPrefixCls,f=l.direction,h=u.useContext(z.Z),p=u.useContext(U.Z),m=d("switch",r),g=u.createElement("div",{className:"".concat(m,"-handle")},o&&u.createElement(E.Z,{className:"".concat(m,"-loading-icon")})),v=O()((t={},(0,k.Z)(t,"".concat(m,"-small"),"small"===(a||h)),(0,k.Z)(t,"".concat(m,"-loading"),o),(0,k.Z)(t,"".concat(m,"-rtl"),"rtl"===f),t),void 0===i?"":i);return u.createElement(V.Z,{insertExtraNode:!0},u.createElement(R,(0,S.Z)({},c,{prefixCls:m,className:v,disabled:s||p||o,ref:n,loadingIcon:g})))});M.__ANT_SWITCH=!0;var H=t(71577),B=t(22004),q=function(e){var n=e.current,t=e.setCurrent,r=e.handleUpdateLesson,a=e.uploading,i=e.uploadVideoButtonText,c=e.handleVideo,d=e.progress,f=(0,u.useState)(!1),h=f[0],p=f[1];return(0,u.useEffect)(function(){p(!1),setTimeout(function(){return p(!0)},1e3)},[n]),(0,l.jsx)("div",{className:"container pt-3",children:(0,l.jsxs)("form",{onSubmit:r,children:[(0,l.jsx)("input",{type:"text",className:"form-control square",onChange:function(e){return t((0,o.Z)((0,s.Z)({},n),{title:e.target.value}))},value:n.title,autoFocus:!0,required:!0}),(0,l.jsx)("textarea",{className:"form-control mt-3",cols:"7",rows:"7",onChange:function(e){return t((0,o.Z)((0,s.Z)({},n),{content:e.target.value}))},value:n.content}),(0,l.jsxs)("div",{children:[!a&&n.video&&n.video.Location&&(0,l.jsx)("div",{className:"pt-2 d-flex justify-content-center",children:(0,l.jsx)(B.default,{url:h?n.video.Location:"/",width:"410px",height:"240px",controls:!0})}),(0,l.jsxs)("label",{className:"btn btn-dark btn-block text-left mt-3",children:[i,(0,l.jsx)("input",{onChange:c,type:"file",accept:"video/*",hidden:!0})]})]}),d>0&&(0,l.jsx)(_.Z,{className:"d-flex justify-content-center pt-2",percent:d,steps:10}),(0,l.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,l.jsx)("span",{className:"pt-3 badge",children:"Preview"}),(0,l.jsx)(M,{className:"float-right mt-2",disabled:a,checked:n.free_preview,name:"fee_preview",onChange:function(e){return t((0,o.Z)((0,s.Z)({},n),{free_preview:e}))}})]}),(0,l.jsx)(H.Z,{onClick:r,className:"col mt-3",size:"large",type:"primary",loading:a,shape:"round",children:"Save"})]})})},G=x.ZP.Item,K=function(){var e,n=(0,u.useState)({name:"",description:"",price:"9.99",uploading:!1,paid:!0,category:"",loading:!1,lessons:[]}),t=n[0],p=n[1],y=(0,u.useState)({}),b=y[0],N=y[1],w=(0,u.useState)(""),_=w[0],S=w[1],k=(0,u.useState)("Upload Image"),E=k[0],I=k[1],O=(0,u.useState)(!1),T=O[0],D=O[1],A=(0,u.useState)({}),L=A[0],R=A[1],P=(0,u.useState)("Upload Video"),U=P[0],z=P[1],V=(0,u.useState)(0),F=V[0],M=V[1],H=(0,u.useState)(!1),B=H[0],K=H[1],X=(0,v.useRouter)().query.slug;(0,u.useEffect)(function(){en()},[X]);var $,J,W,Q,Y,ee,en=(e=(0,r.Z)(function(){var e;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return[4,d.Z.get("/api/course/".concat(X))];case 1:return e=n.sent().data,console.log(e),e&&p(e),e&&e.image&&N(e.image),[2]}})}),function(){return e.apply(this,arguments)}),et=function(e){p((0,o.Z)((0,s.Z)({},t),(0,a.Z)({},e.target.name,e.target.value)))},er=function(e){var n,a=e.target.files[0];S(window.URL.createObjectURL(a)),I(a.name),p((0,o.Z)((0,s.Z)({},t),{loading:!0})),m().imageFileResizer(a,720,500,"JPEG",100,0,(n=(0,r.Z)(function(e){var n,r;return(0,c.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,d.Z.post("/api/course/upload-image",{image:e})];case 1:return n=a.sent().data,console.log("IMAGE UPLOADED",n),N(n),p((0,o.Z)((0,s.Z)({},t),{loading:!1})),[3,3];case 2:return r=a.sent(),console.log(r),p((0,o.Z)((0,s.Z)({},t),{loading:!1})),(0,g.Am)("Image upload failed. Try later."),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}))},ea=($=(0,r.Z)(function(){var e;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),p((0,o.Z)((0,s.Z)({},t),{loading:!0})),[4,d.Z.post("/api/course/remove-image",{image:b})];case 1:return n.sent(),N({}),S(""),I("Upload Image"),p((0,o.Z)((0,s.Z)({},t),{loading:!1})),[3,3];case 2:return e=n.sent(),console.log(e),p((0,o.Z)((0,s.Z)({},t),{loading:!1})),(0,g.Am)("Image upload failed. Try later."),[3,3];case 3:return[2]}})}),function(){return $.apply(this,arguments)}),es=(J=(0,r.Z)(function(e){var n;return(0,c.__generator)(this,function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.Z.put("/api/course/".concat(X),(0,o.Z)((0,s.Z)({},t),{image:b}))];case 2:return r.sent().data,(0,g.Am)("Course updated!"),[3,4];case 3:return n=r.sent(),(0,g.Am)(n.response.data),[3,4];case 4:return[2]}})}),function(e){return J.apply(this,arguments)}),eo=function(e,n){e.dataTransfer.setData("itemIndex",n)},ei=(W=(0,r.Z)(function(e,n){var r,a,l,u;return(0,c.__generator)(this,function(c){switch(c.label){case 0:return r=e.dataTransfer.getData("itemIndex"),a=n,u=(l=t.lessons)[r],l.splice(r,1),l.splice(a,0,u),p((0,o.Z)((0,s.Z)({},t),{lessons:(0,i.Z)(l)})),[4,d.Z.put("/api/course/".concat(X),(0,o.Z)((0,s.Z)({},t),{image:b}))];case 1:return c.sent().data,(0,g.Am)("Lessons rearranged successfully"),[2]}})}),function(e,n){return W.apply(this,arguments)}),ec=(Q=(0,r.Z)(function(e){var n,r,a,i;return(0,c.__generator)(this,function(n){switch(n.label){case 0:if(!window.confirm("Are you sure you want to delete?"))return[2];return a=(r=t.lessons).splice(e,1),p((0,o.Z)((0,s.Z)({},t),{lessons:r})),[4,d.Z.put("/api/course/".concat(X,"/").concat(a[0]._id))];case 1:return i=n.sent().data,console.log("LESSON DELETED =>",i),[2]}})}),function(e){return Q.apply(this,arguments)}),el=(Y=(0,r.Z)(function(e){var n,r,a,i;return(0,c.__generator)(this,function(c){switch(c.label){case 0:if(!(L.video&&L.video.Location))return[3,2];return[4,d.Z.post("/api/course/video-remove/".concat(t.instructor._id),L.video)];case 1:n=c.sent(),console.log("REMOVED ===>",n),c.label=2;case 2:return z((r=e.target.files[0]).name),K(!0),(a=new FormData).append("video",r),a.append("courseId",t._id),[4,d.Z.post("/api/course/video-upload/".concat(t.instructor._id),a,{onUploadProgress:function(e){return M(Math.round(100*e.loaded/e.total))}})];case 3:return i=c.sent().data,console.log(i),R((0,o.Z)((0,s.Z)({},L),{video:i})),K(!1),[2]}})}),function(e){return Y.apply(this,arguments)}),eu=(ee=(0,r.Z)(function(e){var n,r,a;return(0,c.__generator)(this,function(a){switch(a.label){case 0:return e.preventDefault(),[4,d.Z.put("/api/course/lesson/".concat(X,"/").concat(L._id),L)];case 1:return n=a.sent().data,z("Upload Video"),D(!1),n.ok&&(r[(r=t.lessons).findIndex(function(e){return e._id===L._id})]=L,p((0,o.Z)((0,s.Z)({},t),{lessons:r})),(0,g.Am)("Lesson updated")),[2]}})}),function(e){return ee.apply(this,arguments)});return(0,l.jsxs)(f.Z,{children:[(0,l.jsx)("h1",{className:"jumbotron text-center square",children:"Update Course"}),(0,l.jsx)("div",{className:"pt-3 pb-3",children:(0,l.jsx)(h.Z,{handleSubmit:es,handleImageRemove:ea,handleImage:er,handleChange:et,values:t,setValues:p,preview:_,uploadButtonText:E,editPage:!0})}),(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"row pb-5",children:(0,l.jsxs)("div",{className:"col lesson-list",children:[(0,l.jsxs)("h4",{children:[t&&t.lessons&&t.lessons.length," Lessons"]}),(0,l.jsx)(x.ZP,{onDragOver:function(e){return e.preventDefault()},itemLayout:"horizontal",dataSource:t&&t.lessons,renderItem:function(e,n){return(0,l.jsxs)(G,{draggable:!0,onDragStart:function(e){return eo(e,n)},onDrop:function(e){return ei(e,n)},children:[(0,l.jsx)(G.Meta,{onClick:function(){D(!0),R(e)},avatar:(0,l.jsx)(Z.C,{children:n+1}),title:e.title}),(0,l.jsx)(C,{onClick:function(){return ec(n)},className:"text-danger float-right"})]})}})]})}),(0,l.jsx)(j.Z,{title:"Update lesson",centered:!0,open:T,onCancel:function(){return D(!1)},footer:null,destroyOnClose:!0,children:(0,l.jsx)(q,{current:L,setCurrent:R,handleVideo:el,handleUpdateLesson:eu,uploadVideoButtonText:U,progress:F,uploading:B})})]})}},10797:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return a}})}},function(e){e.O(0,[577,805,678,4,910,985,774,888,179],function(){return e(e.s=59869)}),_N_E=e.O()}]);